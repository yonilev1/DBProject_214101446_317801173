-- Add new columns to Resident table
ALTER TABLE Resident
  ADD COLUMN MedicalStatus VARCHAR(100),
  ADD COLUMN Gender VARCHAR(10);

-- Add new columns to MedicalTreatment table
ALTER TABLE MedicalTreatment
  ADD COLUMN FollowUpDate DATE,
  ADD COLUMN Notes TEXT;

-- Add new column to Caregiver table
ALTER TABLE Caregiver
  ADD COLUMN Specialization VARCHAR(100);

-- Create new table: Medications
CREATE TABLE Medications (
  MedicationID SERIAL PRIMARY KEY,
  M_Name VARCHAR(100),
  Dosage VARCHAR(50),
  Form VARCHAR(50),
  Manufacturer VARCHAR(100),
  ApprovalDate DATE,
  ExpiryDate DATE
);

-- Create new table: ResidentMedications
CREATE TABLE ResidentMedications (
  ResidentMedicationID SERIAL PRIMARY KEY,
  ResidentID INT,
  MedicationID INT,
  StartDate DATE,
  EndDate DATE,
  Frequency VARCHAR(50),
  PrescribedBy INT,
  FOREIGN KEY (ResidentID) REFERENCES Resident(ResidentID),
  FOREIGN KEY (MedicationID) REFERENCES Medications(MedicationID),
  FOREIGN KEY (PrescribedBy) REFERENCES Caregiver(CaregiverID)
);

-- Create new table: Appointments
CREATE TABLE Appointments (
  AppointmentDate DATE,
  AppointmentTime TIME,
  ResidentID INT,
  CaregiverID INT,
  Purpose TEXT,
  Status VARCHAR(50),
  PRIMARY KEY (AppointmentDate, CaregiverID),
  FOREIGN KEY (ResidentID) REFERENCES Resident(ResidentID),
  FOREIGN KEY (CaregiverID) REFERENCES Caregiver(CaregiverID)
);